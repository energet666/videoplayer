/// <reference types="svelte" />
/// <reference types="vite/client" />

// ============================================================================
// TypeScript-декларация для Electron API
// ============================================================================
// Расширяем глобальный интерфейс Window, добавляя типы для electronAPI,
// которое предоставляется через preload.cjs (contextBridge).
// Это позволяет TypeScript знать о доступных методах и не выдавать ошибки.
//
// Свойство опционально (?), потому что приложение может работать и без Electron
// (например, при разработке в обычном браузере).
// ============================================================================

interface Window {
    electronAPI?: {
        /** Запрашивает файл, переданный при запуске приложения */
        getInitialFile: () => Promise<string | null>;

        /** Подписка на открытие файла из внешних источников (Открыть с помощью...) */
        onOpenFile: (callback: (path: string) => void) => () => void;

        /** Просит main-процесс изменить размер окна под размер видео */
        resizeWindow: (width: number, height: number) => void;

        /** Скрывает окно (для PiP-режима) */
        hideWindow: () => void;

        /** Показывает окно (при выходе из PiP-режима) */
        showWindow: () => void;

        /** Возвращает текущую платформу (darwin, win32, linux) */
        getPlatform: () => string;
    };
}
