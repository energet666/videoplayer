# План разработки видеоплеера (Svelte 5 + Tailwind 4 + Electron)

## 1. Инициализация проекта
- [x] Создать проект на Vite с шаблоном Svelte.
  - Используем Svelte 5.
- [x] Установить Tailwind CSS 4.
  - Настройка PostCSS/Vite для Tailwind 4.
- [x] Установить Electron и необходимые зависимости.
  - `electron`, `electron-builder` (для сборки), `concurrently` (для запуска dev server и electron).

## 2. Настройка Electron (Main Process)
- [x] Создать точку входа `electron/main.js`.
- [x] Настроить создание окна:
  - `frame: false` (без рамок и заголовков).
  - `titleBarStyle: 'hidden'`.
  - `transparent: false` (черный фон).
  - `resizable: true`.
- [x] Настроить загрузку URL.

## 3. Настройка Svelte (Renderer Process)
- [x] Очистить стартовый шаблон.
- [x] Настроить стили Tailwind:
  - `html`, `body` 100% ширины/высоты, `overflow: hidden`, черный фон.

## 4. Реализация функционала
### 4.1. Drag & Drop
- [x] Реализовать обработку событий `drop` в `App.svelte`.
- [x] При падении файла:
  - Получение `File` объекта.
  - Создание `blob:` URL.
  - Передача в компонент.

### 4.2. Воспроизведение видео
- [x] Создать компонент `<VideoPlayer />`.
- [x] Использовать тег `<video>` с `controls`.
- [x] Использовать `URL.createObjectURL`.

### 4.3. Адаптация окна под видео
- [x] При `loadedmetadata` получить размеры.
- [x] Отправить IPC `resize-window`.
- [x] Main process: `mainWindow.setContentSize`.

## 5. UI и Эстетика
- [x] Скрыть стандартные рамки (сделано в конфигурации окна).
- [x] Основной UI: Черный экран, приглашение Drop Video.
- [x] Drag Region:
  - В пустом состоянии: все окно.
  - При воспроизведении: верхняя область (градиент при наведении).

## 6. Сборка и Запуск
- [x] Настроить скрипты в `package.json`.
- [ ] Проверить работу на macOS.

## 7. Кастомные элементы управления (Apple Style)
- [x] Отключить стандартные controles (`<video controls>`).
- [x] Реализовать оверлей с элементами управления:
  - [x] Кнопка Play/Pause (центр и нижняя панель).
  - [x] Прогресс-бар (скраббер) с поддержкой drag.
  - [x] Таймер (текущее время / длительность).
  - [x] Регулятор громкости.
- [x] Стилизация (Glassmorphism, анимации, иконки).
- [x] Логика скрытия/показа при неактивности мыши.
  - [x] Управление с клавиатуры:
  - [x] Пробел (короткое нажатие): Play/Pause.
    - [x] Пробел (долгое нажатие): Скорость 2x.
    - [x] Стрелки (короткое): +/- 1 сек.
    - [x] Стрелки (долгое): Плавная перемотка вперед (16x) / назад (программный интервал).
    - [x] Стрелки (верх/вниз): Скорость 1x / 1.25x / 1.5x / 2x.

## 8. Доработки и Улучшения (Refinements)
- [x] Плавная анимация размытия (Blur Effect) при появлении контролов.
- [x] Адаптивность панели управления:
  - Сворачивание элементов при уменьшении ширины окна.
  - Корректное отображение на узких экранах.
- [x] Улучшенная логика перемотки назад:
  - Использование интервалов для плавной перемотки (скачки по 3с каждые 300мс).
- [x] Авто-запуск видео при Drag & Drop.

## 9. Конфигурация Сборки (Build & Distribution)
- [x] Настроить `electron-builder` для кросс-платформенной сборки.
- [x] macOS: Сборка в `.dmg`.
- [x] Windows: Сборка в Portable `.exe` (x64).
- [x] Скрипты `npm run build:mac` и `npm run build:win`.

## 10. Миграция на TypeScript
- [x] Установка зависимостей (`typescript`, `svelte-check`, etc.).
- [x] Конфигурация `tsconfig.json`.
- [x] Конвертация скриптов (`.js` -> `.ts`) и компонентов (`lang="ts"`).
- [x] Типизация основных компонентов (`VideoPlayer.svelte`, `App.svelte`).
