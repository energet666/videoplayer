# VideoPlayer

Этот проект представляет собой видеоплеер, построенный с использованием:
- **Svelte 5** (Vite)
- **Electron**
- **TailwindCSS**

## Предварительные требования

Перед началом работы убедитесь, что у вас установлены:
- [Node.js](https://nodejs.org/) (версия 18 или новее)
- npm (обычно идет в комплекте с Node.js)

## Установка

1. Склонируйте репозиторий:
   ```bash
   git clone <URL_репозитория>
   cd videoplayer
   ```
   *(Если вы уже находитесь в папке проекта, просто перейдите к следующему шагу)*

2. Установите зависимости:
   ```bash
   npm install
   ```

## Разработка и отладка

Для запуска проекта в режиме разработки выполните команду:

```bash
npm run dev
```

Эта команда запускает:
1. Vite сервер (для фронтенда Svelte) на порту `5173`.
2. Electron (основной процесс), который подключается к этому серверу.

### Отладка

- **Frontend (Svelte)**:
  - Используйте **Инструменты разработчика (DevTools)**, встроенные в окно Electron.
  - Чтобы открыть их, нажмите `Cmd+Option+I` (macOS) или `Ctrl+Shift+I` (Windows/Linux), либо выберите `View -> Toggle Developer Tools` в меню приложения.
  - Изменения в коде Svelte применяются автоматически (HMR - Hot Module Replacement).

- **Backend (Electron Main Process)**:
  - Логи основного процесса (`electron/main.js`) выводятся в терминал, в котором вы запустили `npm run dev`.
  - При изменении файлов в папке `electron/`, приложение автоматически перезагрузится (если настроено, иначе потребуется перезапуск процесса `npm run dev`).

## Сборка проекта

Чтобы собрать приложение для распространения (создать установочные файлы или исполняемый файл), используйте следующие команды:

### Сборка для текущей платформы

```bash
npm run build
```

Результаты сборки будут находиться в папке `release`.

### Сборка для конкретных платформ

- **macOS** (DMG):
  ```bash
  npm run build:mac
  ```

- **Windows** (Portable exe):
  ```bash
  npm run build:win
  ```

> **Важно**: Для сборки под другую ОС (например, сборка Windows-версии на Mac) может потребоваться дополнительная настройка или использование CI/CD, но `electron-builder` часто справляется с этим автоматически, если не требуется компиляция нативных модулей.

## Работа с иконками

Для генерации иконок приложения под разные платформы (macOS `.icns`, Windows `.ico`, Linux `.png`) используется скрипт `generate_icons.sh`.

1.  Поместите исходное изображение иконки (желательно 1024x1024 PNG) в `build/icon.png`.
2.  Запустите скрипт генерации:
    ```bash
    ./generate_icons.sh
    ```
    Скрипт автоматически создаст необходимые файлы иконок в папке `build/`.
    *Требует наличия `ffmpeg` (для .ico) и `iconutil` (macOS).*

## Руководство пользователя

### Управление с клавиатуры

| Клавиша | Действие |
| --- | --- |
| **Пробел** | Пауза / Воспроизведение (краткое нажатие) |
| **Пробел (удержание)** | Ускорение видео x2 |
| **Стрелка Влево** | Перемотка назад на 1 секунду |
| **Стрелка Влево (удержание)** | Быстрая перемотка назад |
| **Стрелка Вправо** | Перемотка вперед на 1 секунду |
| **Стрелка Вправо (удержание)** | Ускоренное воспроизведение x16 |
| **Стрелка Вверх** | Увеличить скорость воспроизведения |
| **Стрелка Вниз** | Уменьшить скорость воспроизведения |

### Жесты (Тачпад)

- **Горизонтальный скролл (свайп двумя пальцами)**: Плавная перемотка видео вперед/назад.

### Мышь

- **Клик по видео**: Пауза / Воспроизведение.
- **Двойной клик**: Полноэкранный режим.
- **Картинка в картинке**: Нажмите кнопку PiP в панели управления (основное окно свернется).


## Структура проекта

- **src/**: Исходный код Svelte приложения (компоненты, логика интерфейса).
- **electron/**: Исходный код главного процесса Electron (`main.js`, `preload.cjs`).
- **public/**: Статические файлы, которые копируются в корень сборки.
- **build/**: Ресурсы для сборки приложения (иконки, скрипты).
- **dist/**: Папка с собранными файлами фронтенда (создается Vite при сборке).
- **release/**: Папка с готовыми установочными файлами приложения (создается electron-builder).
